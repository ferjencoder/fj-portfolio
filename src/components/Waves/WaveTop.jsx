import { useEffect } from 'react';
import { useSelector, useDispatch } from 'react-redux';
import { nextColorOne } from '../../store/ui/colorSliceOne';
import './Waves.css';

export const WaveTop = () => {
    const dispatch = useDispatch();
    const colorIndex = useSelector( state => state.colorOne.colorIndex );
    const colors = useSelector( state => state.colorOne.colors );
    const currentColor = colors[ colorIndex ];

    useEffect( () => {
        const interval = setInterval( () => {
            dispatch( nextColorOne() );
        }, 5000 ); // Change color every 5 seconds

        return () => clearInterval( interval ); // Clean up on unmount
    }, [ dispatch ] );

    useEffect( () => {
        document.querySelectorAll( '.gradientStop' ).forEach( stop => {
            stop.setAttribute( 'stop-color', currentColor );
            stop.style.transition = 'stop-color 5s';
        } );
    }, [ currentColor ] );

    return (
        <svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" style={{ margin: 'auto', display: 'block', zIndex: 1, position: 'relative', shapeRendering: 'auto', background: 'none' }} preserveAspectRatio="xMidYMid" viewBox="0 0 1980 400">
            <g transform="translate(990,200) scale(1,1) translate(-990,-200)"><linearGradient id="lg-0.9806142618949643" x1="0" x2="1" y1="0" y2="0">
                <stop className="gradientStop" offset="0"></stop>
                <stop className="gradientStop" offset="1"></stop>
            </linearGradient>
                <path d="" fill="url(#lg-0.9806142618949643)" opacity="0.4">
                    <animate attributeName="d" dur="10s" repeatCount="indefinite" keyTimes="0;0.333;0.667;1" calcMode="spline" keySplines="0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1" begin="0s" values="M0 0L 0 249.61648494637956Q 198 185.0770833884667  396 159.50100865748863T 792 209.13482003389305T 1188 228.34984709025707T 1584 210.72123720475366T 1980 227.25888995813526L 1980 0 Z;M0 0L 0 168.87134748197505Q 198 204.61348696098705  396 158.9900787218557T 792 227.83032322547353T 1188 227.35510827342122T 1584 169.8749837183313T 1980 204.79931819427495L 1980 0 Z;M0 0L 0 188.86216698954178Q 198 203.3979839553699  396 158.27160054792174T 792 211.16466747297923T 1188 223.91216346745904T 1584 216.4587606634373T 1980 194.26539385927262L 1980 0 Z;M0 0L 0 249.61648494637956Q 198 185.0770833884667  396 159.50100865748863T 792 209.13482003389305T 1188 228.34984709025707T 1584 210.72123720475366T 1980 227.25888995813526L 1980 0 Z"></animate>
                </path>
                <path d="" fill="url(#lg-0.9806142618949643)" opacity="0.4">
                    <animate attributeName="d" dur="10s" repeatCount="indefinite" keyTimes="0;0.333;0.667;1" calcMode="spline" keySplines="0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1" begin="-2s" values="M0 0L 0 177.91676872540722Q 198 230.4793802021142  396 211.16389246670542T 792 204.16513994803512T 1188 181.16023014751678T 1584 196.2627815297676T 1980 210.79837282778738L 1980 0 Z;M0 0L 0 224.69254482755434Q 198 233.22176342786923  396 211.92000351759089T 792 224.55748420273176T 1188 237.69074464051334T 1584 228.47258556940398T 1980 189.82603698878302L 1980 0 Z;M0 0L 0 213.91197558199053Q 198 269.3421463086461  396 235.07637260726707T 792 209.12433275199265T 1188 180.82312517341788T 1584 152.58417742532785T 1980 240.6073048895658L 1980 0 Z;M0 0L 0 177.91676872540722Q 198 230.4793802021142  396 211.16389246670542T 792 204.16513994803512T 1188 181.16023014751678T 1584 196.2627815297676T 1980 210.79837282778738L 1980 0 Z"></animate>
                </path>
                <path d="" fill="url(#lg-0.9806142618949643)" opacity="0.4">
                    <animate attributeName="d" dur="10s" repeatCount="indefinite" keyTimes="0;0.333;0.667;1" calcMode="spline" keySplines="0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1" begin="-4s" values="M0 0L 0 183.11408648902486Q 198 256.62400421292557  396 234.43981141064415T 792 155.08421566584573T 1188 196.58375763175468T 1584 177.5491583833038T 1980 181.11188705499762L 1980 0 Z;M0 0L 0 171.27483539575618Q 198 179.76756649878686  396 161.7773394298584T 792 206.60696566358726T 1188 217.94360479415252T 1584 193.41659313644666T 1980 194.11355646982074L 1980 0 Z;M0 0L 0 178.47691824852907Q 198 224.40418354116923  396 193.8691668497935T 792 179.55905336984293T 1188 197.10829191825272T 1584 156.39062567023862T 1980 255.7362763935622L 1980 0 Z;M0 0L 0 183.11408648902486Q 198 256.62400421292557  396 234.43981141064415T 792 155.08421566584573T 1188 196.58375763175468T 1584 177.5491583833038T 1980 181.11188705499762L 1980 0 Z"></animate>
                </path>
                <path d="" fill="url(#lg-0.9806142618949643)" opacity="0.4">
                    <animate attributeName="d" dur="10s" repeatCount="indefinite" keyTimes="0;0.333;0.667;1" calcMode="spline" keySplines="0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1" begin="-6s" values="M0 0L 0 223.86467690300566Q 198 216.30910917725592  396 198.9476230586258T 792 196.15505931330495T 1188 166.82539313240423T 1584 233.59040737247707T 1980 247.1974721337912L 1980 0 Z;M0 0L 0 196.34385188779078Q 198 190.89015174628992  396 158.6767351127078T 792 255.39275738422265T 1188 158.87354130923393T 1584 181.51011076841218T 1980 186.13088181253488L 1980 0 Z;M0 0L 0 166.00285358561916Q 198 202.93076745895019  396 157.63586310228766T 792 159.8185043927072T 1188 249.83475418392217T 1584 200.5400605833419T 1980 189.44694451450283L 1980 0 Z;M0 0L 0 223.86467690300566Q 198 216.30910917725592  396 198.9476230586258T 792 196.15505931330495T 1188 166.82539313240423T 1584 233.59040737247707T 1980 247.1974721337912L 1980 0 Z"></animate>
                </path>
                <path d="" fill="url(#lg-0.9806142618949643)" opacity="0.4">
                    <animate attributeName="d" dur="10s" repeatCount="indefinite" keyTimes="0;0.333;0.667;1" calcMode="spline" keySplines="0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1" begin="-8s" values="M0 0L 0 159.1784698166268Q 198 202.9158387986016  396 176.57200719158763T 792 224.5337810463796T 1188 202.0110215400519T 1584 158.51928126529867T 1980 209.60854263505033L 1980 0 Z;M0 0L 0 198.91529328068984Q 198 226.66869801753455  396 199.2760228768138T 792 150.16072445607716T 1188 207.94317838048372T 1584 217.3527202503543T 1980 203.95571355818825L 1980 0 Z;M0 0L 0 184.25636384131624Q 198 225.23196974221827  396 195.46078671499927T 792 219.46690255444034T 1188 181.97067340581478T 1584 186.58062054209492T 1980 224.2489215189682L 1980 0 Z;M0 0L 0 159.1784698166268Q 198 202.9158387986016  396 176.57200719158763T 792 224.5337810463796T 1188 202.0110215400519T 1584 158.51928126529867T 1980 209.60854263505033L 1980 0 Z"></animate>
                </path>
            </g>
        </svg>
    );
};
